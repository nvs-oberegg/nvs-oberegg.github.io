<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
  <head>
    <title>NVS - Oberegg</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta http-equiv="Content-Script-Type" content="text/javascript" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <meta http-equiv="Content-Language" content="en" />
    <meta name="author" content="Othmar Schmid" />

    <link rel="stylesheet" type="text/css" href="./leaflet.css" title="Standard" media="screen" />
  </head>
  <body>
    <div id="page">
      <div style="margin: 10px 30px 10px 30px;">
        <div id="mapdiv" style="width:1600px;height:1000px">
        </div>
      </div>
    </div>
    <script src="./leaflet.js"></script>
    <script type="text/javascript">
      var map = L.map('mapdiv').setView([47.4230, 9.5700], 15);
      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        maxZoom: 18,
        attribution: 'Map data &copy; <a href="https://openstreetmap.org">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>'
      }).addTo(map);

      var redMarker = L.icon({
        iconUrl: './marker_red.png',
        iconRetinaUrl: './marker_red.png',
        iconSize: [25, 41],
        iconAnchor: [12, 40],
        popupAnchor: [2, -35]
      });

      var blueMarker = L.icon({
        iconUrl: './marker_blue.png',
        iconRetinaUrl: './marker_blue.png',
        iconSize: [25, 41],
        iconAnchor: [12, 40],
        popupAnchor: [2, -35]
      });
      const data = [
        ["-1-", "47.43051", "9.55439", "nistkasten.jpg", "111", "*1*"],
        ["-2-", "47.43045", "9.55342", "nistkasten.jpg", "222", "*2*"],
        ["-3-", "47.43038", "9.55209", "nistkasten.jpg", "333", "*3*"],
        ["-4-", "47.43035", "9.55162", "nistkasten.jpg", "444", "*4*"],
        ["-5-", "47.43002", "9.55149", "nistkasten.jpg", "555", "*5*"],
      ]
      const galleryTitle = "Nistkastenpositionen"
      var index = 0
      selectedIndex = Math.min(Math.max(0, localStorage.getItem(galleryTitle)||0), data.length-1)
      for (element of data) {
        var colorMarker = redMarker
        if (index == selectedIndex){
          colorMarker = blueMarker
        }
        var marker = L.marker([element[1], element[2]], {icon: colorMarker}).addTo(map);
        marker.bindPopup("<b>" + element[4] + "</b><br><a href=\"picture.html\" onclick=\"localStorage.setItem(galleryTitle, " + index + ");return true;\"><img src=\"" + element[3] + "\" alt=\"" + element[4] + "\" title=\"" + element[4] + "\" /></a>");
        index = index + 1
      };
    </script>
  </body>
</html>
